/**
 * Too Many Chats - Styles v2.0.0
 * Uses SillyTavern's native CSS variables
 */

/* 
   CRITICAL: Hide the native chat list wrapper.
   We use !important to ensure we override ST's own styles.
   We keep it in the DOM so we can read from it, but user sees our Proxy UI.
*/
#select_chat_popup .select_chat_block_wrapper,
#shadow_select_chat_popup .select_chat_block_wrapper {
    display: none !important;
}

/* Our Proxy Root - Ensure it is visible and scrollable */
#tmc_proxy_root {
    display: flex;
    flex-direction: column;
    gap: 4px;
    width: 100%;
    margin-bottom: 10px;
    min-height: 50px;
    max-height: 60vh;
    /* Limit height so it doesn't overflow popup */
    overflow-y: auto;
    /* Enable vertical scrolling */
    overflow-x: hidden;
    padding-right: 4px;
    /* Space for scrollbar */
}

/* Section (Folder Row) */
.tmc_section {
    border: 1px solid var(--SmartThemeBorderColor);
    background: var(--SmartThemeBlurTintColor);
    border-radius: 8px;
    overflow: hidden;
    margin-bottom: 4px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* Header */
.tmc_header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 12px;
    background: var(--SmartThemeInputColor);
    cursor: pointer;
    user-select: none;
    font-size: 13px;
    color: var(--SmartThemeBodyColor);
    transition: background 0.15s;
}

.tmc_header:hover {
    background: var(--SmartThemeUpperBarColor);
}

.tmc_header_left {
    display: flex;
    align-items: center;
    gap: 8px;
    flex: 1;
}

.tmc_header_right {
    display: flex;
    gap: 6px;
    opacity: 0.4;
    transition: opacity 0.15s;
}

.tmc_header:hover .tmc_header_right {
    opacity: 1;
}

.tmc_toggle {
    font-family: monospace;
    font-size: 10px;
    width: 14px;
    color: var(--SmartThemeBodyColor);
    opacity: 0.7;
}

.tmc_icon {
    font-size: 16px;
}

.tmc_name {
    font-weight: 600;
    color: var(--SmartThemeHeaderColor);
}

.tmc_count {
    font-size: 10px;
    background: var(--SmartThemeBorderColor);
    padding: 2px 8px;
    border-radius: 10px;
    color: var(--SmartThemeBodyColor);
    opacity: 0.8;
}

.tmc_btn {
    padding: 4px 6px;
    font-size: 12px;
    border-radius: 4px;
    cursor: pointer;
    color: var(--SmartThemeBodyColor);
}

.tmc_btn:hover {
    background: var(--SmartThemeBorderColor);
    color: var(--SmartThemeQuoteColor);
}

.tmc_del:hover {
    color: #ff6b6b;
}

/* Content */
.tmc_content {
    display: flex;
    flex-direction: column;
    background: rgba(0, 0, 0, 0.1);
}

/* Proxy Chat Block Styling (Mimic native ST block) */
.tmc_proxy_block.select_chat_block {
    display: flex !important;
    align-items: center !important;
    gap: 10px !important;
    margin: 0 !important;
    width: 100% !important;
    border: none !important;
    border-bottom: 1px solid var(--SmartThemeBorderColor) !important;
    border-radius: 0 !important;
    padding: 10px 14px !important;
    background: transparent !important;
    cursor: pointer !important;
    transition: background 0.15s !important;
    min-height: 48px;
}

.tmc_proxy_block.select_chat_block:hover {
    background: var(--SmartThemeUpperBarColor) !important;
}

.tmc_proxy_block.select_chat_block:last-child {
    border-bottom: none !important;
}

/* Uncategorized */
.tmc_uncat {
    border: none;
    background: transparent;
    box-shadow: none;
    margin-top: 12px;
}

.tmc_uncat .tmc_header {
    background: transparent;
    opacity: 0.6;
    border-bottom: 1px solid var(--SmartThemeBorderColor);
}

.tmc_uncat .tmc_header:hover {
    opacity: 1;
}

/* Context Menu */
.tmc_ctx {
    position: fixed;
    background: var(--SmartThemeBlurTintColor);
    border: 1px solid var(--SmartThemeBorderColor);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
    z-index: 20002;
    min-width: 180px;
    border-radius: 8px;
    overflow: hidden;
    backdrop-filter: blur(10px);
}

.tmc_ctx_head {
    padding: 8px 12px;
    font-size: 11px;
    color: var(--SmartThemeBodyColor);
    opacity: 0.7;
    text-transform: uppercase;
    border-bottom: 1px solid var(--SmartThemeBorderColor);
    background: rgba(0, 0, 0, 0.2);
}

.tmc_ctx_item {
    padding: 10px 14px;
    color: var(--SmartThemeBodyColor);
    cursor: pointer;
    font-size: 13px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.tmc_ctx_item:hover {
    background: var(--SmartThemeUpperBarColor);
    color: var(--SmartThemeQuoteColor);
}

.tmc_ctx_sep {
    height: 1px;
    background: var(--SmartThemeBorderColor);
    margin: 4px 0;
}

.tmc_new {
    color: #4cd137;
}

/* Add Button in Popup Header */
.tmc_add_btn {
    font-size: 16px;
    cursor: pointer;
    margin-left: 8px;
    opacity: 0.7;
    transition: all 0.2s;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 30px;
    height: 30px;
    border-radius: 5px;
}

.tmc_add_btn:hover {
    opacity: 1;
    background: var(--SmartThemeBorderColor);
    color: var(--SmartThemeQuoteColor);
}